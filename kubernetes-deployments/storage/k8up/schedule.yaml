---
apiVersion: k8up.io/v1
kind: Schedule
metadata:
  name: schedule-test
  namespace: wikijs
spec:
  backend:
    s3:
      endpoint: http://barenas.jsnouff.net:9000
      bucket: wikijs-postgresql-backup
      accessKeyIDSecretRef:
        name: restic-backup-credentials
        key: s3AccessKey
      secretAccessKeySecretRef:
        name: restic-backup-credentials
        key: s3SecretKey
    repoPasswordSecretRef:
      name: restic-backup-credentials
      key: resticKey
  backup:
    schedule: '0 */12 * * *'
    failedJobsHistoryLimit: 1
    successfulJobsHistoryLimit: 0
    podSecurityContext:
      runAsUser: 0
  check:
    schedule: '30 1 * * *'
    failedJobsHistoryLimit: 1
    successfulJobsHistoryLimit: 0
  prune:
    schedule: '0 1 * * *'
    failedJobsHistoryLimit: 1
    successfulJobsHistoryLimit: 0
    retention:
      keepLast: 5
      keepDaily: 14
      keepWeekly: 4
      keepMonthly: 6