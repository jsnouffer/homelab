---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: restic-backup-credentials
spec:
  secretStoreRef:
    kind: ClusterSecretStore
    name: doppler-secret-store
  target:
    name: restic-backup-credentials
    deletionPolicy: Delete
  refreshInterval: 1h
  data:
  - remoteRef:
      conversionStrategy: Default
      decodingStrategy: None
      key: MINIO_ACCESS_KEY
      metadataPolicy: None
    secretKey: s3AccessKey
  - remoteRef:
      conversionStrategy: Default
      decodingStrategy: None
      key: MINIO_SECRET_KEY
      metadataPolicy: None
    secretKey: s3SecretKey
  - remoteRef:
      conversionStrategy: Default
      decodingStrategy: None
      key: RESTIC_ENCRYPTION_KEY
      metadataPolicy: None
    secretKey: resticKey
